import{_ as z,u as N,o as _}from"./index-c269a5b9.js";import{i as x,d as O,r as p,q as b,z as H,n as I,o as j,H as M,I as U,J as S,L as V,M as h,K as u}from"./@vue-dca935c3.js";const E=()=>({wrap:"",contents:"",fake:""}),P={props:{classNames:{Type:Object,default(){return E()}}},setup(l){const e=x("pageContents",{}),o={ui:{common:N(),scrollBlock:_()}},t=O({isSticky:!1,marginTop:"0",marginBottom:"0",height:"0"}),d=p(null),a=p(null),B=p(null),C=b(()=>{const{classNames:s}=l;return Object.assign(E(),s)}),L=()=>{const y=a.value.children[0],r=getComputedStyle(y),c=r.getPropertyValue("margin-top"),m=r.getPropertyValue("margin-bottom");t.marginTop=c,t.marginBottom=m},n=()=>{const s=d.value;if(s.offsetHeight<=0)return;const r=a.value.children[0],c=(()=>o.ui.scrollBlock.isBlocking?o.ui.scrollBlock.scrollTop:document.getElementsByTagName("html")[0].scrollTop)(),m=c+s.getBoundingClientRect().top,v=r.offsetHeight,T=window.innerHeight;if(o.ui.common.keypadOpened||c>=m+v-T){t.isSticky&&(t.isSticky=!1);return}t.height=`${v}px`,t.isSticky||(t.isSticky=!0)},f=()=>{n()},i=()=>{n()},k=()=>{n()},w=()=>{n()},g=()=>{n()};return H(()=>{L(),I(()=>{n()}),window.addEventListener("load",k),window.addEventListener("scroll",f),window.addEventListener("resize",i),window.addEventListener("keypadOpened",w),window.addEventListener("keypadClosed",g),e.wrap&&e.wrap.value&&e.wrap.value.addEventListener("resize",i)}),j(()=>{window.removeEventListener("load",k),window.removeEventListener("scroll",f),window.removeEventListener("resize",i),window.removeEventListener("keypadOpened",w),window.removeEventListener("keypadClosed",g),e.wrap&&e.wrap.value&&e.wrap.value.removeEventListener("resize",i)}),{state:t,wrap:d,contents:a,fake:B,customClassNames:C}}};function q(l,e,o,t,d,a){return M(),U("div",{ref:"wrap",class:u(t.customClassNames.wrap)},[S("div",{ref:"contents",style:h({position:t.state.isSticky?"fixed":"static",bottom:t.state.isSticky?"0":null,left:t.state.isSticky?"0":null,width:t.state.isSticky?"100%":null,zIndex:t.state.isSticky?"1000":null,transform:"translateZ(0)",transition:"transform 0s"}),class:u([{"is-sticky":t.state.isSticky},t.customClassNames.contents])},[V(l.$slots,"default",{isSticky:t.state.isSticky})],6),S("div",{class:u(t.customClassNames.fake),style:h({display:t.state.isSticky?"block":"none",marginTop:t.state.marginTop,marginBottom:t.state.marginBottom,height:t.state.height})},null,6)],2)}const Z=z(P,[["render",q]]);export{Z as B};

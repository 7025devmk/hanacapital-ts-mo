import{c as W,g as K}from"./unhead-685dcbea.js";import{n as B,i as V,v as q,u as j,r as x,w as F,a as G,o as N,b as J,c as z,g as Q}from"./@vue-dca935c3.js";const X=new Set(["title","titleTemplate","script","style","noscript"]),H=new Set(["base","meta","link","style","script","noscript"]),Y=new Set(["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),Z=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),D=new Set(["tagPosition","tagPriority","tagDuplicateStrategy","children","innerHTML","textContent","processTemplateParams"]),be=typeof window<"u";function ge(e){return e}function C(e){let t=9;for(let n=0;n<e.length;)t=Math.imul(t^e.charCodeAt(n++),9**9);return((t^t>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function M(e){if(e._h)return e._h;if(e._d)return C(e._d);let t=`${e.tag}:${e.textContent||e.innerHTML||""}:`;for(const n in e.props)t+=`${n}:${String(e.props[n])},`;return C(t)}function ee(e,t){return e instanceof Promise?e.then(t):t(e)}function A(e,t,n,r){const i=r||U(typeof t=="object"&&typeof t!="function"&&!(t instanceof Promise)?{...t}:{[e==="script"||e==="noscript"||e==="style"?"innerHTML":"textContent"]:t},e==="templateParams"||e==="titleTemplate");if(i instanceof Promise)return i.then(s=>A(e,t,n,s));const o={tag:e,props:i};for(const s of D){const d=o.props[s]!==void 0?o.props[s]:n[s];d!==void 0&&((!(s==="innerHTML"||s==="textContent"||s==="children")||X.has(o.tag))&&(o[s==="children"?"innerHTML":s]=d),delete o.props[s])}return o.props.body&&(o.tagPosition="bodyClose",delete o.props.body),o.tag==="script"&&typeof o.innerHTML=="object"&&(o.innerHTML=JSON.stringify(o.innerHTML),o.props.type=o.props.type||"application/json"),Array.isArray(o.props.content)?o.props.content.map(s=>({...o,props:{...o.props,content:s}})):o}function te(e,t){var r;const n=e==="class"?" ":";";return t&&typeof t=="object"&&!Array.isArray(t)&&(t=Object.entries(t).filter(([,i])=>i).map(([i,o])=>e==="style"?`${i}:${o}`:i)),(r=String(Array.isArray(t)?t.join(n):t))==null?void 0:r.split(n).filter(i=>!!i.trim()).join(n)}function $(e,t,n,r){for(let i=r;i<n.length;i+=1){const o=n[i];if(o==="class"||o==="style"){e[o]=te(o,e[o]);continue}if(e[o]instanceof Promise)return e[o].then(s=>(e[o]=s,$(e,t,n,i)));if(!t&&!D.has(o)){const s=String(e[o]),d=o.startsWith("data-");s==="true"||s===""?e[o]=d?"true":!0:e[o]||(d&&s==="false"?e[o]="false":delete e[o])}}}function U(e,t=!1){const n=$(e,t,Object.keys(e),0);return n instanceof Promise?n.then(()=>e):e}const ne=10;function I(e,t,n){for(let r=n;r<t.length;r+=1){const i=t[r];if(i instanceof Promise)return i.then(o=>(t[r]=o,I(e,t,r)));Array.isArray(i)?e.push(...i):e.push(i)}}function ve(e){const t=[],n=e.resolvedInput;for(const i in n){if(!Object.prototype.hasOwnProperty.call(n,i))continue;const o=n[i];if(!(o===void 0||!Y.has(i))){if(Array.isArray(o)){for(const s of o)t.push(A(i,s,e));continue}t.push(A(i,o,e))}}if(t.length===0)return[];const r=[];return ee(I(r,t,0),()=>r.map((i,o)=>(i._e=e._i,e.mode&&(i._m=e.mode),i._p=(e._i<<ne)+o,i)))}const Te=new Set(["onload","onerror","onabort","onprogress","onloadstart"]),L={base:-10,title:10},O={critical:-80,high:-10,low:20};function we(e){const t=e.tagPriority;if(typeof t=="number")return t;let n=100;return e.tag==="meta"?e.props["http-equiv"]==="content-security-policy"?n=-30:e.props.charset?n=-20:e.props.name==="viewport"&&(n=-15):e.tag==="link"&&e.props.rel==="preconnect"?n=20:e.tag in L&&(n=L[e.tag]),t&&t in O?n+O[t]:n}const Pe=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}],oe=["name","property","http-equiv"];function re(e){const{props:t,tag:n}=e;if(Z.has(n))return n;if(n==="link"&&t.rel==="canonical")return"canonical";if(t.charset)return"charset";if(t.id)return`${n}:id:${t.id}`;for(const r of oe)if(t[r]!==void 0)return`${n}:${r}:${t[r]}`;return!1}const h="%separator";function ie(e,t,n=!1){var i;let r;if(t==="s"||t==="pageTitle")r=e.pageTitle;else if(t.includes(".")){const o=t.indexOf(".");r=(i=e[t.substring(0,o)])==null?void 0:i[t.substring(o+1)]}else r=e[t];if(r!==void 0)return n?(r||"").replace(/"/g,'\\"'):r||""}const se=new RegExp(`${h}(?:\\s*${h})*`,"g");function He(e,t,n,r=!1){if(typeof e!="string"||!e.includes("%"))return e;let i=e;try{i=decodeURI(e)}catch{}const o=i.match(/%\w+(?:\.\w+)?/g);if(!o)return e;const s=e.includes(h);return e=e.replace(/%\w+(?:\.\w+)?/g,d=>{if(d===h||!o.includes(d))return d;const g=ie(t,d.slice(1),r);return g!==void 0?g:d}).trim(),s&&(e.endsWith(h)&&(e=e.slice(0,-h.length)),e.startsWith(h)&&(e=e.slice(h.length)),e=e.replace(se,n).trim()),e}function Ae(e,t){return e==null?t||null:typeof e=="function"?e(t):e}async function ae(e,t={}){const n=t.document||e.resolvedOptions.document;if(!n||!e.dirty)return;const r={shouldRender:!0,tags:[]};if(await e.hooks.callHook("dom:beforeRender",r),!!r.shouldRender)return e._domUpdatePromise||(e._domUpdatePromise=new Promise(async i=>{var S;const o=(await e.resolveTags()).map(a=>({tag:a,id:H.has(a.tag)?M(a):a.tag,shouldRender:!0}));let s=e._dom;if(!s){s={elMap:{htmlAttrs:n.documentElement,bodyAttrs:n.body}};const a=new Set;for(const c of["body","head"]){const l=(S=n[c])==null?void 0:S.children;for(const u of l){const f=u.tagName.toLowerCase();if(!H.has(f))continue;const y={tag:f,props:await U(u.getAttributeNames().reduce((v,w)=>({...v,[w]:u.getAttribute(w)}),{})),innerHTML:u.innerHTML},b=re(y);let p=b,T=1;for(;p&&a.has(p);)p=`${b}:${T++}`;p&&(y._d=p,a.add(p)),s.elMap[u.getAttribute("data-hid")||M(y)]=u}}}s.pendingSideEffects={...s.sideEffects},s.sideEffects={};function d(a,c,l){const u=`${a}:${c}`;s.sideEffects[u]=l,delete s.pendingSideEffects[u]}function g({id:a,$el:c,tag:l}){const u=l.tag.endsWith("Attrs");if(s.elMap[a]=c,u||(l.textContent&&l.textContent!==c.textContent&&(c.textContent=l.textContent),l.innerHTML&&l.innerHTML!==c.innerHTML&&(c.innerHTML=l.innerHTML),d(a,"el",()=>{var f;(f=s.elMap[a])==null||f.remove(),delete s.elMap[a]})),l._eventHandlers)for(const f in l._eventHandlers)Object.prototype.hasOwnProperty.call(l._eventHandlers,f)&&c.getAttribute(`data-${f}`)!==""&&((l.tag==="bodyAttrs"?n.defaultView:c).addEventListener(f.substring(2),l._eventHandlers[f].bind(c)),c.setAttribute(`data-${f}`,""));for(const f in l.props){if(!Object.prototype.hasOwnProperty.call(l.props,f))continue;const y=l.props[f],b=`attr:${f}`;if(f==="class"){if(!y)continue;for(const p of y.split(" "))u&&d(a,`${b}:${p}`,()=>c.classList.remove(p)),!c.classList.contains(p)&&c.classList.add(p)}else if(f==="style"){if(!y)continue;for(const p of y.split(";")){const T=p.indexOf(":"),v=p.substring(0,T).trim(),w=p.substring(T+1).trim();d(a,`${b}:${v}`,()=>{c.style.removeProperty(v)}),c.style.setProperty(v,w)}}else c.getAttribute(f)!==y&&c.setAttribute(f,y===!0?"":String(y)),u&&d(a,b,()=>c.removeAttribute(f))}}const _=[],m={bodyClose:void 0,bodyOpen:void 0,head:void 0};for(const a of o){const{tag:c,shouldRender:l,id:u}=a;if(l){if(c.tag==="title"){n.title=c.textContent;continue}a.$el=a.$el||s.elMap[u],a.$el?g(a):H.has(c.tag)&&_.push(a)}}for(const a of _){const c=a.tag.tagPosition||"head";a.$el=n.createElement(a.tag.tag),g(a),m[c]=m[c]||n.createDocumentFragment(),m[c].appendChild(a.$el)}for(const a of o)await e.hooks.callHook("dom:renderTag",a,n,d);m.head&&n.head.appendChild(m.head),m.bodyOpen&&n.body.insertBefore(m.bodyOpen,n.body.firstChild),m.bodyClose&&n.body.appendChild(m.bodyClose);for(const a in s.pendingSideEffects)s.pendingSideEffects[a]();e._dom=s,await e.hooks.callHook("dom:rendered",{renders:o}),i()}).finally(()=>{e._domUpdatePromise=void 0,e.dirty=!1})),e._domUpdatePromise}function ce(e,t={}){const n=t.delayFn||(r=>setTimeout(r,10));return e._domDebouncedUpdatePromise=e._domDebouncedUpdatePromise||new Promise(r=>n(()=>ae(e,t).then(()=>{delete e._domDebouncedUpdatePromise,r()})))}function _e(e){return t=>{var r,i;const n=((i=(r=t.resolvedOptions.document)==null?void 0:r.head.querySelector('script[id="unhead:payload"]'))==null?void 0:i.innerHTML)||!1;return n&&t.push(JSON.parse(n)),{mode:"client",hooks:{"entries:updated":o=>{ce(o,e)}}}}}const le=q[0]==="3";function fe(e){return typeof e=="function"?e():j(e)}function P(e){if(e instanceof Promise||e instanceof Date||e instanceof RegExp)return e;const t=fe(e);if(!e||!t)return t;if(Array.isArray(t))return t.map(n=>P(n));if(typeof t=="object"){const n={};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(r==="titleTemplate"||r[0]==="o"&&r[1]==="n"){n[r]=j(t[r]);continue}n[r]=P(t[r])}return n}return t}const de={hooks:{"entries:resolve":e=>{for(const t of e.entries)t.resolvedInput=P(t.input)}}},R="usehead";function ue(e){return{install(n){le&&(n.config.globalProperties.$unhead=e,n.config.globalProperties.$head=e,n.provide(R,e))}}.install}function Se(e={}){e.domDelayFn=e.domDelayFn||(n=>B(()=>setTimeout(()=>n(),0)));const t=W(e);return t.use(de),t.install=ue(t),t}const E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},k="__unhead_injection_handler__";function pe(){if(k in E)return E[k]();const e=V(R);return e||K()}function xe(e,t={}){const n=t.head||pe();if(n)return n.ssr?n.push(e,t):ye(n,e,t)}function ye(e,t,n={}){const r=x(!1),i=x({});F(()=>{i.value=r.value?{}:P(t)});const o=e.push(i.value,n);return G(i,d=>{o.patch(d)}),Q()&&(N(()=>{o.dispose()}),J(()=>{r.value=!0}),z(()=>{r.value=!1})),o}export{_e as D,H,be as I,Te as N,Pe as S,ge as a,we as b,Se as c,ce as d,C as e,Ae as f,M as h,ve as n,He as p,ae as r,re as t,xe as u};
